<form name="addNewPaymentInfoForm" id="addNewPaymentInfo">

  <div class="well">
    <p>
      When you provide services using CompanyNme, you will receive payment for your services via an electronic transfer of funds directly to your bank account. Please follow the instructions below to provide the information associated with the bank account where you would like your payments deposited.
    </p>
    <p>
      For your security and protection, we are required by federal law to verify the bank account provided is owned by you. For this reason, personal information is required below.
    </p>
    <p>
      We take the privacy and security of your personal information seriously. As such, we use Stripe, one of the most secure payment processors available. CompanyNme does not store your personal information, instead, your information is encrypted and tokenized to facilitate the electronic transfer of funds using Stripe.
    </p>
  </div>

  <div>
    <section>
      <div class="custom-flex custom-alignFlexCenter custom-mb20">
          <div class="circle cir-sm cir-default"><span>1</span></div>
          <div class="custom-ml10">Home Address <small>(<span class="custom-text-danger">Required</span>)</small></div>
      </div>
      <div class="custom-flex custom-alignFlexCenter">
        <div class="form-group custom-mr5">
          <label for="Address">Street</label>
          <input type="text" class="form-control" name="Address" data-ng-model="paymentInfo.address" required style="min-width:292px;" data-ng-class="{'errorFields': !paymentInfo.address && formHasError}">
        </div>
        <div class="form-group custom-mr5">
          <label for="City">City</label>
          <input type="text" class="form-control" name="City" data-ng-model="paymentInfo.city" required data-ng-class="{'errorFields': !paymentInfo.city && formHasError}">
        </div>
        <div class="form-group custom-mr5">
          <label><span>State</span></label>
          <select data-ng-options="state.Abbreviation as state.name for state in statesList" data-ng-model="paymentInfo.state" required data-ng-class="{'errorFields': !paymentInfo.state && formHasError}">
              <option value="">Select</option>
          </select>
        </div>
        <div class="form-group">
          <label for="zip">Postal Code</label>
          <input type="text" class="form-control" name="zip" data-ng-model="paymentInfo.zip" required data-ng-class="{'errorFields': !paymentInfo.zip && formHasError}" style="width:100px;">
        </div>

      </div>

    </section>
  </div>

  <div class="custom-flex custom-mb20">
    <div class="custom-mr20 custom-width-50" >
      <section>
          <div class="custom-flex custom-alignFlexCenter custom-mb20">
            <div class="circle cir-sm cir-default"><span>2</span></div>
            <div class="custom-ml10">Banking Information <small>(<span class="custom-text-danger">Required</span>)</small></div>
          </div>
          <div class="custom-mb20"><img src="/images/checkRoutingInfo.png" class="custom-width-100"></div>
          <div class="">
              <div class="form-group">
                  <label>Account Type</label>
                  <select data-ng-model="paymentInfo.consultantAccountType">
                    <option value="1" data-ng-value="1">Personal Checking</option>
                    <option value="2" data-ng-value="2">Business</option>
                  </select>
              </div>
              <div class="form-group">
                  <label>Account Holder First Name</label>
                  <input type="text" class="form-control" name="AHFN" data-ng-model="paymentInfo.accountHolderFirstName" required data-ng-class="{'errorFields': !paymentInfo.accountHolderFirstName && formHasError}">
              </div>
              <div class="form-group">
                  <label>Account Holder Last Name</label>
                  <input type="text" class="form-control" name="AHLN" data-ng-model="paymentInfo.accountHolderLastName" required data-ng-class="{'errorFields': !paymentInfo.accountHolderLastName && formHasError}">
              </div>
              <div class="form-group" data-ng-if="paymentInfo.consultantAccountType === 2">
                  <label>Legal Name of the Company</label>
                  <input type="text" class="form-control" name="companyName" data-ng-model="paymentInfo.businessName" required data-ng-class="{'errorFields': !paymentInfo.businessName && formHasError}">
              </div>
              <div class="form-group">
                  <label for="BRN">Bank Routing Number</label>
                  <input type="text" class="form-control" name="BRN" data-ng-model="paymentInfo.bankRoutingNumber" limit-number maxlength="9" required data-ng-class="{'errorFields': !paymentInfo.bankRoutingNumber && formHasError}">
              </div>
              <div class="form-group">
                  <label for="BAN">Account Number</label>
                  <input type="text" class="form-control" name="BAN" data-ng-model="paymentInfo.bankAccountNumber" required data-ng-class="{'errorFields': !paymentInfo.bankAccountNumber && formHasError}" placeholder="Up to 17 digits">
              </div>
              <div class="form-group">
                  <label for="CAN">Confirm Account Number</label>
                  <input type="text" class="form-control" name="CAN"  data-ng-model="paymentInfo.confirmBAN" compare-to="paymentInfo.bankAccountNumber" required data-ng-class="{'errorFields': !paymentInfo.confirmBAN && formHasError}" placeholder="Up to 17 digits">
                  <span data-ng-show="addNewPaymentInfoForm.CAN.$error.compareTo && addNewPaymentInfoForm.CAN.$touched" class="custom-error">This field must match what you entered above</span>
              </div>
          </div>
      </section>
    </div>
    <div class="custom-width-50">
      <section>
          <div class="custom-flex custom-alignFlexCenter custom-mb20">
            <div class="circle cir-sm cir-default"><span>3</span></div>
            <div class="custom-ml10">Verification Information I <small>(<span class="custom-text-danger">Required</span>)</small></div>
          </div>
          <div class="">
            <div class="form-group">
              <label for="EIN" data-ng-if="paymentInfo.consultantAccountType === 1">Social Security Number</label>            
              <input type="text" class="form-control" name="EIN" data-ng-model="paymentInfo.identificationNumber" ssn-formated placeholder="###-##-####" required data-ng-class="{'errorFields': !paymentInfo.identificationNumber && formHasError}" data-ng-if="paymentInfo.consultantAccountType === 1">
              <label for="EIN" data-ng-if="paymentInfo.consultantAccountType === 2">Tax Identification Number</label>
              <input type="text" class="form-control" name="EIN" data-ng-model="paymentInfo.identificationNumber" ein-formated placeholder="##-#######" required data-ng-class="{'errorFields': !paymentInfo.identificationNumber && formHasError}" data-ng-if="paymentInfo.consultantAccountType === 2">
            </div>
            <div class="form-group" data-ng-if="paymentInfo.consultantAccountType === 2">
              <label for="SSN">Social Security Number (last 4 digits)</label>
              <input type="text" class="form-control" name="SSN" data-ng-model="paymentInfo.SSNLast4"  limit-number maxlength="4" placeholder="####" required data-ng-class="{'errorFields': !paymentInfo.identificationNumber && formHasError}">
            </div>
          </div>
          <div class="form-group">
            <label>Date of Birth</label>
            <md-input-container class="md-block md-gpBlue-theme" md-is-error="!paymentInfo.dob && formHasError">
              <md-datepicker data-ng-model="paymentInfo.dob" md-current-view="year" name="dob" data-ng-required="true" md-max-date="dobMaxDate" md-min-date="dobMinDate" md-placeholder="D.O.B." data-ng-class="{'md-errorField': !paymentInfo.dob && formHasError}"></md-datepicker>
            </md-input-container>
          </div>
      </section>
      <section>
        <div class="custom-flex custom-alignFlexCenter custom-mb20">
          <div class="circle cir-sm cir-default"><span>4</span></div>
          <div class="custom-ml10">Verification Information II</div>
        </div>
        <div class="custom-mb20">
            <p class="custom-error font-xxs">
                Once deposits exceed $10,000, we may require users to provide additional information to verify their ID.  You can void any potential delays by providing the information now.
            </p>
            <p class="font-xxs">
              Use your phone to capture a color photo of your passport, or the front and back image of your drivers license, or a government issued ID. (Format must be .jpg or .png)
            </p>
        </div>
        <div>
          <div>
            <md-radio-group data-ng-model="paymentInfo.idType" name="acctType" class="custom-flex">
              <div class="custom-mr20 custom-width-45">
                 <md-radio-button data-ng-value="1" value="1" class="gpBlue font-xs">Passport</md-radio-button>
                 <i class="fa fa-paperclip" data-ng-class="{'custom-text-danger': !identification.front && formHasError}">
                   <div id="identificationPhoto" class="dragNDrop" name="identificationPhoto"
                   ngf-select ngf-drop
                   data-ng-model="identification.front"
                   ngf-model-invalid="invalidFiles"
                   ngf-model-options="modelOptionsObj"
                   ngf-multiple="false"
                   ngf-pattern="'.jpg,.png,.jpeg'"
                   ngf-accept="'.jpg,.png,.jpeg'"
                   data-ng-disabled="paymentInfo.idType === 2"
                   ngf-select-disabled="paymentInfo.idType === 2"
                   ngf-drop-disabled="paymentInfo.idType === 2"
                   ngf-capture="capture"
                   ngf-drag-over-class="dragOverClassObj"
                   ngf-validate="validateObj"
                   ngf-resize="resizeObj"
                   ngf-resize-if="resizeIfFn($file, $width, $height)"
                   ngf-dimensions="dimensionsFn($file, $width, $height)"
                   ngf-duration="durationFn($file, $duration)"
                   ngf-keep="keepDistinct ? 'distinct' : keep"
                   ngf-fix-orientation="true"
                   ngf-max-files="1"
                   ngf-max-size = "5MB"
                   ngf-ignore-invalid="ignoreInvalid"
                   ngf-run-all-validations="runAllValidations"
                   ngf-allow-dir="allowDir" class="drop-box"
                   ngf-drop-available="dropAvailable"
                   >
                     &nbsp;
                   </div>
                   <span data-ng-class="{'custom-text-danger': !identification.front && formHasError}">
                     <span data-ng-if="!identification.front.name || paymentInfo.idType === 2">Attach Image</span>
                     <span data-ng-if="identification.front.name && paymentInfo.idType === 1">{{identification.front.name}}</span>
                   </span>
                 </i>
                 <label class="upload" for="identificationPhoto"  data-ng-if="paymentInfo.idType === 1">
                   <img ngf-src="identification.front" class="custom-width-100">
                 </label>
              </div>
              <div class="custom-width-45">
                <md-radio-button data-ng-value="2" value="2" class="gpBlue font-xs">Driver's License</md-radio-button>
                <i class="fa fa-paperclip" data-ng-class="{'custom-text-danger': !identification.front && formHasError}">
                  <div id="identificationPhoto" class="dragNDrop" name="identificationPhoto"
                  ngf-select ngf-drop
                  data-ng-model="identification.front"
                  ngf-model-invalid="invalidFiles"
                  ngf-model-options="modelOptionsObj"
                  ngf-multiple="false"
                  ngf-pattern="'.jpg,.png,.jpeg'"
                  ngf-accept="'.jpg,.png,.jpeg'"
                  data-ng-disabled="paymentInfo.idType === 1"
                  ngf-select-disabled="paymentInfo.idType === 1"
                  ngf-drop-disabled="paymentInfo.idType === 1"
                  ngf-capture="capture"
                  ngf-drag-over-class="dragOverClassObj"
                  ngf-validate="validateObj"
                  ngf-resize="resizeObj"
                  ngf-resize-if="resizeIfFn($file, $width, $height)"
                  ngf-dimensions="dimensionsFn($file, $width, $height)"
                  ngf-duration="durationFn($file, $duration)"
                  ngf-keep="keepDistinct ? 'distinct' : keep"
                  ngf-fix-orientation="true"
                  ngf-max-files="1"
                  ngf-max-size = "5MB"
                  ngf-ignore-invalid="ignoreInvalid"
                  ngf-run-all-validations="runAllValidations"
                  ngf-allow-dir="allowDir" class="drop-box"
                  ngf-drop-available="dropAvailable"
                  >
                    &nbsp;
                  </div>
                  <span data-ng-class="{'custom-text-danger': !identification.front && formHasError}">
                    <span data-ng-if="!identification.front.name || paymentInfo.idType === 1">Attach Front Image</span>
                    <span data-ng-if="identification.front.name && paymentInfo.idType === 2" >{{identification.front.name}}</span>
                  </span>
                </i>
                <label class="upload" for="identificationPhoto" data-ng-if="paymentInfo.idType === 2">
                  <img ngf-src="identification.front" class="custom-width-100">
                </label>

                <i class="fa fa-paperclip" data-ng-class="{'custom-text-danger': !identification.front && formHasError}">
                  <div id="identificationPhoto" class="dragNDrop" name="identificationPhoto"
                  ngf-select ngf-drop
                  data-ng-model="identification.back"
                  ngf-model-invalid="invalidFiles"
                  ngf-model-options="modelOptionsObj"
                  ngf-multiple="false"
                  ngf-pattern="'.jpg,.png,.jpeg'"
                  ngf-accept="'.jpg,.png,.jpeg'"
                  data-ng-disabled="paymentInfo.idType === 1"
                  ngf-select-disabled="paymentInfo.idType === 1"
                  ngf-drop-disabled="paymentInfo.idType === 1"
                  ngf-capture="capture"
                  ngf-drag-over-class="dragOverClassObj"
                  ngf-validate="validateObj"
                  ngf-resize="resizeObj"
                  ngf-resize-if="resizeIfFn($file, $width, $height)"
                  ngf-dimensions="dimensionsFn($file, $width, $height)"
                  ngf-duration="durationFn($file, $duration)"
                  ngf-keep="keepDistinct ? 'distinct' : keep"
                  ngf-fix-orientation="true"
                  ngf-max-files="1"
                  ngf-max-size = "5MB"
                  ngf-ignore-invalid="ignoreInvalid"
                  ngf-run-all-validations="runAllValidations"
                  ngf-allow-dir="allowDir" class="drop-box"
                  ngf-drop-available="dropAvailable"
                  >
                    &nbsp;
                  </div>
                  <span data-ng-class="{'custom-text-danger': !identification.back && formHasError}">
                    <span data-ng-if="!identification.back.name || paymentInfo.idType === 1">Attach Back Image</span>
                    <span data-ng-if="identification.back.name && paymentInfo.idType === 2" >{{identification.back.name}}</span>
                  </span>
                </i>
                <label class="upload" for="identificationPhoto" data-ng-if="paymentInfo.idType === 2">
                  <img ngf-src="identification.back" class="custom-width-100">
                </label>

              </div>
              <div class="custom-width-10">
                  <a class="btn btn-xs" data-ng-click="undoSelect(paymentInfo)">Clear</a>
              </div>
            </md-radio-group>
          </div>
        </div>
      </section>
    </div>
  </div>

  <div class="custom-mb20">
      <md-checkbox aria-label="Checkbox 1" data-ng-model="terms" class="md-gpSolidBlue md-raised custom-ml15 font-s" required> I have read and agree to the <a href="https://stripe.com/us/ssa" target="_blank"><strong>Terms and Conditions</strong></a> for the <a href="https://stripe.com/" target="_blank"><strong>Stripe</strong></a> payment processor</md-checkbox>
  </div>
  <div class="custom-error" ng-show="showResponseError">{{errorMsg}}</div>
  <div id="toastMsg"></div>
  <div class="custom-flex">
    <button class="btn btn-primary" data-ng-click="CoNameSetUserNewPaymentInformation(paymentInfo, addNewPaymentInfoForm, identification)" data-ng-disabled="!terms">Add New Account</button>
  </div>

</form>
